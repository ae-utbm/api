{"version":3,"names":["cov_2v65badmc","actualCoverage","core_1","s","require","swagger_1","base_entity_1","user_entity_1","perms_1","Role","exports","BaseEntity","constructor","f","revoked","users","Collection","__decorate","Property","unique","ApiProperty","type","String","example","name","onCreate","Boolean","default","Date","enum","PERMISSIONS_NAMES","isArray","ManyToMany","User","user","roles","owner","Entity","tableName"],"sources":["/Users/juknum/Documents/Code/AE/api/src/modules/roles/entities/role.entity.ts"],"sourcesContent":["import type { PermissionName, RoleEntity } from '@types';\n\nimport { Collection, Entity, ManyToMany, Property } from '@mikro-orm/core';\nimport { ApiProperty } from '@nestjs/swagger';\n\nimport { BaseEntity } from '@modules/_mixin/entities/base.entity';\nimport { Permission } from '@modules/permissions/entities/permission.entity';\nimport { User } from '@modules/users/entities/user.entity';\nimport { PERMISSIONS_NAMES } from 'src/types/api/permissions/perms';\n\n/**\n * Entity used to store roles, which are a collection of permissions\n */\n@Entity({ tableName: 'roles' })\nexport class Role extends BaseEntity implements RoleEntity<Permission, User> {\n\t/** Name of the role, in caps */\n\t@Property({ unique: true })\n\t@ApiProperty({ type: String, example: 'AE_ADMIN' })\n\tname: Uppercase<string>;\n\n\t/** Determine wether the role is still active */\n\t@Property({ name: 'is_revoked', onCreate: () => false })\n\t@ApiProperty({ type: Boolean, default: false })\n\trevoked = false;\n\n\t/** Specify when the role should expires */\n\t@Property({ name: 'expires_at' })\n\t@ApiProperty()\n\texpires: Date;\n\n\t/** Specify what permissions the role has */\n\t@Property({ name: 'permissions' })\n\t@ApiProperty({ enum: PERMISSIONS_NAMES, isArray: true })\n\tpermissions: PermissionName[];\n\n\t/** Specify to which user the role is attached */\n\t@ManyToMany(() => User, (user) => user.roles, { owner: true })\n\tusers = new Collection<User>(this);\n}\n"],"mappings":"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"}