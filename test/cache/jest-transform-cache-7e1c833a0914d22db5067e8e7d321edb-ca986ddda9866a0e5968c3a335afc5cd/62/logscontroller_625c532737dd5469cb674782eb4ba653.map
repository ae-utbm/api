{"version":3,"names":["cov_1kx5t9blu0","actualCoverage","common_1","s","require","passport_1","swagger_1","message_response_dto_1","permissions_decorator_1","self_or_perms_decorator_1","permission_guard_1","self_or_perms_guard_1","log_entity_1","logs_service_1","LogsController","exports","constructor","logsService","f","getUserLogs","id","deleteUserLogs","__decorate","Get","UseGuards","SelfOrPermissionGuard","GuardSelfOrPermissions","ApiNotFoundResponse","description","ApiBadRequestResponse","ApiOkResponse","type","Log","ApiParam","name","ApiOperation","summary","__param","Param","Delete","PermissionGuard","GuardPermissions","MessageResponseDTO","Controller","AuthGuard","ApiTags","ApiBearerAuth","LogsService"],"sources":["/Users/juknum/Documents/Code/AE/api/src/modules/logs/logs.controller.ts"],"sourcesContent":["import { Controller, Delete, Get, Param, UseGuards } from '@nestjs/common';\nimport { AuthGuard } from '@nestjs/passport';\nimport {\n\tApiTags,\n\tApiBearerAuth,\n\tApiNotFoundResponse,\n\tApiBadRequestResponse,\n\tApiOkResponse,\n\tApiParam,\n\tApiOperation,\n} from '@nestjs/swagger';\n\nimport { MessageResponseDTO } from '@modules/_mixin/dto/message-response.dto';\nimport { GuardPermissions } from '@modules/auth/decorators/permissions.decorator';\nimport { GuardSelfOrPermissions } from '@modules/auth/decorators/self-or-perms.decorator';\nimport { PermissionGuard } from '@modules/auth/guards/permission.guard';\nimport { SelfOrPermissionGuard } from '@modules/auth/guards/self-or-perms.guard';\n\nimport { Log } from './entities/log.entity';\nimport { LogsService } from './logs.service';\n\n@Controller('logs')\n@UseGuards(AuthGuard('jwt'))\n@ApiTags('Logs')\n@ApiBearerAuth()\nexport class LogsController {\n\tconstructor(private readonly logsService: LogsService) {}\n\n\t@Get('user/:id')\n\t@UseGuards(SelfOrPermissionGuard)\n\t@GuardSelfOrPermissions('id', ['CAN_READ_LOGS_OF_USER'])\n\t@ApiNotFoundResponse({ description: 'User not found' })\n\t@ApiBadRequestResponse({ description: 'Invalid user ID' })\n\t@ApiOkResponse({ description: 'User logs retrieved', type: [Log] })\n\t@ApiParam({ name: 'id', description: 'The user ID' })\n\t@ApiOperation({ summary: 'Get all logs of a user' })\n\tgetUserLogs(@Param('id') id: number) {\n\t\treturn this.logsService.getUserLogs(id);\n\t}\n\n\t@Delete('user/:id')\n\t@UseGuards(PermissionGuard)\n\t@GuardPermissions('CAN_DELETE_LOGS_OF_USER')\n\t@ApiNotFoundResponse({ description: 'User not found' })\n\t@ApiBadRequestResponse({ description: 'Invalid user ID' })\n\t@ApiOkResponse({ description: 'User logs deleted', type: MessageResponseDTO })\n\t@ApiParam({ name: 'id', description: 'The user ID' })\n\t@ApiOperation({ summary: 'Delete all logs of a user' })\n\tdeleteUserLogs(@Param('id') id: number) {\n\t\treturn this.logsService.deleteUserLogs(id);\n\t}\n}\n"],"mappings":"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"}