56712ee763e59abc321000dfee11975c
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Permission = void 0;
const core_1 = require("@mikro-orm/core");
const swagger_1 = require("@nestjs/swagger");
const base_entity_1 = require("@modules/_mixin/entities/base.entity");
const user_entity_1 = require("@modules/users/entities/user.entity");
const perms_1 = require("src/types/api/permissions/perms");
let Permission = exports.Permission = class Permission extends base_entity_1.BaseEntity {
    constructor() {
        super(...arguments);
        this.revoked = false;
    }
};
__decorate([
    (0, core_1.Property)(),
    (0, swagger_1.ApiProperty)({ enum: perms_1.PERMISSIONS_NAMES }),
    __metadata("design:type", String)
], Permission.prototype, "name", void 0);
__decorate([
    (0, core_1.Property)({ name: 'is_revoked', onCreate: () => false }),
    (0, swagger_1.ApiProperty)({ type: Boolean }),
    __metadata("design:type", Object)
], Permission.prototype, "revoked", void 0);
__decorate([
    (0, core_1.Property)({ name: 'expires_at' }),
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Date)
], Permission.prototype, "expires", void 0);
__decorate([
    (0, core_1.ManyToOne)(() => user_entity_1.User, { onDelete: 'cascade', joinColumn: 'user_id' }),
    (0, swagger_1.ApiProperty)({ type: Number }),
    __metadata("design:type", user_entity_1.User)
], Permission.prototype, "user", void 0);
exports.Permission = Permission = __decorate([
    (0, core_1.Entity)({ tableName: 'permissions' })
], Permission);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2p1a251bS9Eb2N1bWVudHMvQ29kZS9BRS9hcGkvc3JjL21vZHVsZXMvcGVybWlzc2lvbnMvZW50aXRpZXMvcGVybWlzc2lvbi5lbnRpdHkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRUEsMENBQThEO0FBQzlELDZDQUE4QztBQUU5QyxzRUFBa0U7QUFDbEUscUVBQTJEO0FBQzNELDJEQUFvRTtBQUc3RCxJQUFNLFVBQVUsd0JBQWhCLE1BQU0sVUFBVyxTQUFRLHdCQUFVO0lBQW5DOztRQU9OLFlBQU8sR0FBRyxLQUFLLENBQUM7SUFTakIsQ0FBQztDQUFBLENBQUE7QUFiQTtJQUZDLElBQUEsZUFBUSxHQUFFO0lBQ1YsSUFBQSxxQkFBVyxFQUFDLEVBQUUsSUFBSSxFQUFFLHlCQUFpQixFQUFFLENBQUM7O3dDQUNwQjtBQUlyQjtJQUZDLElBQUEsZUFBUSxFQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDdkQsSUFBQSxxQkFBVyxFQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDOzsyQ0FDZjtBQUloQjtJQUZDLElBQUEsZUFBUSxFQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDO0lBQ2hDLElBQUEscUJBQVcsR0FBRTs4QkFDTCxJQUFJOzJDQUFDO0FBSWQ7SUFGQyxJQUFBLGdCQUFTLEVBQUMsR0FBRyxFQUFFLENBQUMsa0JBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxDQUFDO0lBQ3JFLElBQUEscUJBQVcsRUFBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQzs4QkFDeEIsa0JBQUk7d0NBQUM7cUJBZkMsVUFBVTtJQUR0QixJQUFBLGFBQU0sRUFBQyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsQ0FBQztHQUN4QixVQUFVLENBZ0J0QiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvanVrbnVtL0RvY3VtZW50cy9Db2RlL0FFL2FwaS9zcmMvbW9kdWxlcy9wZXJtaXNzaW9ucy9lbnRpdGllcy9wZXJtaXNzaW9uLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFBlcm1pc3Npb25FbnRpdHksIFBlcm1pc3Npb25OYW1lIH0gZnJvbSAnQHR5cGVzJztcblxuaW1wb3J0IHsgRW50aXR5LCBNYW55VG9PbmUsIFByb3BlcnR5IH0gZnJvbSAnQG1pa3JvLW9ybS9jb3JlJztcbmltcG9ydCB7IEFwaVByb3BlcnR5IH0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcblxuaW1wb3J0IHsgQmFzZUVudGl0eSB9IGZyb20gJ0Btb2R1bGVzL19taXhpbi9lbnRpdGllcy9iYXNlLmVudGl0eSc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnQG1vZHVsZXMvdXNlcnMvZW50aXRpZXMvdXNlci5lbnRpdHknO1xuaW1wb3J0IHsgUEVSTUlTU0lPTlNfTkFNRVMgfSBmcm9tICdzcmMvdHlwZXMvYXBpL3Blcm1pc3Npb25zL3Blcm1zJztcblxuQEVudGl0eSh7IHRhYmxlTmFtZTogJ3Blcm1pc3Npb25zJyB9KVxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb24gZXh0ZW5kcyBCYXNlRW50aXR5IGltcGxlbWVudHMgUGVybWlzc2lvbkVudGl0eTxVc2VyPiB7XG5cdEBQcm9wZXJ0eSgpXG5cdEBBcGlQcm9wZXJ0eSh7IGVudW06IFBFUk1JU1NJT05TX05BTUVTIH0pXG5cdG5hbWU6IFBlcm1pc3Npb25OYW1lO1xuXG5cdEBQcm9wZXJ0eSh7IG5hbWU6ICdpc19yZXZva2VkJywgb25DcmVhdGU6ICgpID0+IGZhbHNlIH0pXG5cdEBBcGlQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcblx0cmV2b2tlZCA9IGZhbHNlO1xuXG5cdEBQcm9wZXJ0eSh7IG5hbWU6ICdleHBpcmVzX2F0JyB9KVxuXHRAQXBpUHJvcGVydHkoKVxuXHRleHBpcmVzOiBEYXRlO1xuXG5cdEBNYW55VG9PbmUoKCkgPT4gVXNlciwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnLCBqb2luQ29sdW1uOiAndXNlcl9pZCcgfSlcblx0QEFwaVByb3BlcnR5KHsgdHlwZTogTnVtYmVyIH0pXG5cdHVzZXI6IFVzZXI7XG59XG4iXSwidmVyc2lvbiI6M30=